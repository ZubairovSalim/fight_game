(()=>{"use strict";var t,e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&!t;)t=r[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),function(t){t[t.WIDTH=350]="WIDTH",t[t.HEIGHT=298]="HEIGHT"}(t||(t={}));var n,r,o=100,i=200;!function(t){t[t.LEFT=-1]="LEFT",t[t.RIGHT=1]="RIGHT"}(n||(n={})),function(t){t.STAND="stand",t.FORWARD="forward",t.BACK="back",t.JUMP="jump",t.JUMP_FORWARD="jump-forward",t.JUMP_BACK="jump-back",t.SIT="sit",t.SIT_UP="sit-up",t.SIT_DOWN="sit-down",t.MOVE="move",t.BODY_HIT="body-hit",t.BODY_PUNCH="body-punch",t.BODY_KICK="body-kick",t.HEAD_HIT="head-hit",t.HEAD_PUNCH="head-punch",t.HEAD_KICK="head-kick",t.HEAD_HURT="head-hurt",t.BODY_HURT="body-hurt",t.JUMP_HURT="jump-hurt",t.STAND_UP="stand-up",t.WIN="win",t.LOSE="lose"}(r||(r={}));var s,a=new Map([[r.STAND,[-20,-100,40,90]],[r.JUMP,[-20,-91,40,80]],[r.SIT,[-20,-60,40,60]]]),c=new Map([[r.STAND,[[-5,-103,20,15],[-16,-88,32,36],[-16,-52,32,42]]],[r.JUMP,[[-5,-90,20,15],[-16,-75,32,27],[-16,-48,32,45]]],[r.SIT,[[0,-60,20,15],[-16,-53,32,24],[-16,-30,32,30]]],["PUNCH",[[11,-94,20,15],[-16,-77,32,43],[-16,-33,32,33]]]]),u=new Map([[r.HEAD_PUNCH,[-3,-100,40,12]],[r.HEAD_KICK,[5,-93,40,15]],[r.BODY_PUNCH,[-15,-85,50,14]],[r.BODY_KICK,[0,-75,45,20]]]);!function(t){t.RIGHT="keyRight",t.LEFT="keyLeft",t.UP="keyUp",t.DOWN="keyDown",t.A="keyA",t.B="keyB",t.C="keyC",t.X="keyX",t.Y="keyY",t.Z="keyZ"}(s||(s={}));var h=new Map([[s.RIGHT,"KeyD"],[s.LEFT,"KeyA"],[s.UP,"KeyW"],[s.DOWN,"KeyS"],[s.A,"KeyZ"],[s.B,"KeyX"],[s.C,"KeyC"],[s.X,"KeyQ"],[s.Y,"KeyR"],[s.Z,"KeyE"]]),p=new Map([[s.RIGHT,"ArrowRight"],[s.LEFT,"ArrowLeft"],[s.UP,"ArrowUp"],[s.DOWN,"ArrowDown"],[s.A,"Comma"],[s.B,"Period"],[s.C,"Slash"],[s.X,"KeyK"],[s.Y,"KeyL"],[s.Z,"Semicolon"]]),f=new Map([[n.LEFT,p],[n.RIGHT,h]]);const l=e.p+"3457be82ed49a356e4ad.png",y=e.p+"2028410cc8621b64e6ab.png",g=e.p+"7d15fc4387891388ca0d.png";(new Image).src=l,(new Image).src=y;var d=new Image;d.src=g;var m,v=function(e,n,r){void 0===e&&(e={x:0,y:0}),void 0===n&&(n=d),void 0===r&&(r={width:t.WIDTH,height:t.HEIGHT}),this.position=e,this.style=n,this.size=r,this.position=e,this.style=n,this.size=r},b=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},w=function(){function t(t,e){this.canvas=t,this.canvasContext=e,this.canvas=t,this.canvasContext=e}return t.prototype.renderDebug=function(t,e){var n,r;this.canvasContext.lineWidth,this.renderBox(t,t.pushBox,"#55ff55",e);try{for(var o=b(t.hurtBox),i=o.next();!i.done;i=o.next()){var s=i.value;this.renderBox(t,s,"#0000f0",e)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}this.renderBox(t,t.hitBox,"#ff0000",e),this.canvasContext.beginPath(),this.canvasContext.strokeStyle="white",this.canvasContext.moveTo(t.position.x-e.position.x-4,t.position.y-.5),this.canvasContext.lineTo(t.position.x-e.position.x+5,t.position.y-.5),this.canvasContext.moveTo(t.position.x-e.position.x+.5,t.position.y-5),this.canvasContext.lineTo(t.position.x-e.position.x+.5,t.position.y+4),this.canvasContext.stroke()},t.prototype.renderShadow=function(t,e){this.canvasContext.globalAlpha=.5,this.canvasContext.beginPath(),this.canvasContext.fillStyle="#000",this.canvasContext.ellipse(t.position.x-e.position.x,196,4,30-(i-t.position.y)/10,Math.PI/2,0,2*Math.PI),this.canvasContext.fill(),this.canvasContext.globalAlpha=1},t.prototype.render=function(t,e){var n,r;if(t.style instanceof Array){var o=x(t.style,2),i=o[0],s=o[1];this.canvasContext.fillStyle="#f00000",this.canvasContext.fillRect(20,11,100,10),this.canvasContext.fillRect(240,11,100,10),this.canvasContext.fillStyle="#0000f0",this.canvasContext.fillRect(20,11,i[0].health,10),this.canvasContext.fillRect(100-i[1].health+240,11,i[1].health,10),this.canvasContext.rect(20,11,100,10),this.canvasContext.rect(240,11,100,10);try{for(var a=b(i.entries()),c=a.next();!c.done;c=a.next()){var u=x(c.value,2),h=u[0],p=u[1];this.renderText(p.name,{x:0===h?20:300,y:20},"white")}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}if(i.some((function(t){return 0===t.health}))){var f=x(i[0].getWinnerAndLoser(),1)[0];this.renderText("".concat(f.name," wins"),{x:175,y:50},"white","italic bold 14px arial","center"),this.renderText("Press space to restart",{x:175,y:210},"white","10px arial","center")}this.renderText(s,{x:175,y:20},"yellow","italic bold 20px arial","center")}else if(t.style instanceof HTMLImageElement)if(t.frames){var l=x(t.frames.get(t.state.name),4),y=l[0],g=l[3],d=void 0===g?1:g,m=x(y,4),w=m[0],_=m[1],O=m[2],S=m[3],T=w+d*(t.currentFrame*O);this.canvasContext.scale(t.direction,1),this.canvasContext.drawImage(t.style,T,_,O,S,Math.floor((t.position.x-e.position.x)*t.direction-O/2),Math.floor(t.position.y-S),O,S),this.canvasContext.setTransform(1,0,0,1,0,0),this.renderShadow(t,e)}else t instanceof v?this.canvasContext.drawImage(t.style,-e.position.x,e.position.y):this.canvasContext.drawImage(t.style,t.position.x,t.position.y);else"string"==typeof t.style?(this.canvasContext.fillStyle="white",this.canvasContext.fillText(t.style,t.position.x,t.position.y)):t.style&&(this.canvasContext.fillStyle=t.style,this.canvasContext.fillRect(t.position.x,t.position.y,t.size.width,t.size.height))},t.prototype.renderBox=function(t,e,n,r){this.canvasContext.beginPath();var o=this.canvasContext.strokeStyle;this.canvasContext.strokeStyle=n,this.canvasContext.fillStyle=n,this.canvasContext.rect(Math.floor(t.position.x-r.position.x+e.x*t.direction)+.5,Math.floor(t.position.y+e.y)+.5,e.width*t.direction,e.height),this.canvasContext.stroke(),this.canvasContext.strokeStyle=o},t.prototype.renderText=function(t,e,n,r,o){var i=this.canvasContext.font,s=this.canvasContext.textAlign;r&&(this.canvasContext.font=r),o&&(this.canvasContext.textAlign=o),this.canvasContext.fillStyle=n,this.canvasContext.fillText(t,e.x,e.y),r&&(this.canvasContext.font=i),o&&(this.canvasContext.textAlign=s)},t}(),_=function(){function e(t,e){this.position=t,this.fighters=e,this.position=t,this.fighters=e,this.speed=60}return e.prototype.update=function(e){var n,r,o=Math.min(this.fighters[0].position.x,this.fighters[1].position.x),i=Math.max(this.fighters[0].position.x,this.fighters[1].position.x);if(this.isBothFightersOnOppositeSides(o,i))this.setCameraOnTheMiddleOfFighters(o,i);else try{for(var s=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.fighters),a=s.next();!a.done;a=s.next()){var c=a.value;this.isFighterCrossBorder(c)&&this.setCameraTrackFighter(c,e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}this.position.x<0&&(this.position.x=0),this.position.x>511-t.WIDTH&&(this.position.x=511-t.WIDTH)},e.prototype.isFighterCrossBorder=function(e){return e.position.x<this.position.x+67&&e.velocity.x*e.direction<0||e.position.x>this.position.x+t.WIDTH-67&&e.velocity.x*e.direction>0},e.prototype.setCameraTrackFighter=function(t,e){this.position.x+=t.velocity.x*t.direction*e.secondsPassed},e.prototype.isBothFightersOnOppositeSides=function(e,n){return n-e>t.WIDTH-134},e.prototype.setCameraOnTheMiddleOfFighters=function(e,n){var r=(n-e)/2;this.position.x=e+r-t.WIDTH/2},e}(),O=function(){function t(){}return t.prototype.setFighter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.fighter=t,this.init(e)},Object.defineProperty(t.prototype,"hitBox",{get:function(){return[0,0,0,0]},enumerable:!1,configurable:!0}),t.prototype.isKeyDown=function(t){var e=f.get(this.fighter.DEFAULT.DIRECTION).get(t);return this.fighter.controller.isKeyDown(e)},t.prototype.isKeyUp=function(t){var e=f.get(this.fighter.DEFAULT.DIRECTION).get(t);return this.fighter.controller.isKeyUp(e)},t.prototype.isKeyPressed=function(t){var e=f.get(this.fighter.DEFAULT.DIRECTION).get(t);return this.fighter.controller.isKeyPressed(e)},t.prototype.isForward=function(){return this.fighter.direction===n.RIGHT?this.isKeyDown(s.RIGHT):this.isKeyDown(s.LEFT)},t.prototype.isBack=function(){return this.fighter.direction===n.RIGHT?this.isKeyDown(s.LEFT):this.isKeyDown(s.RIGHT)},t}(),S=(m=function(t,e){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},m(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),T=function(t){function e(){return t.call(this)||this}return S(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return r.STAND},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.STAND)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.STAND)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.fighter.velocity.x=0,this.fighter.velocity.y=0},e.prototype.update=function(t){this.isKeyDown(s.DOWN)?this.fighter.setState(this.fighter.states.get(r.SIT_DOWN)):this.isForward()?this.fighter.setState(this.fighter.states.get(r.FORWARD)):this.isBack()?this.fighter.setState(this.fighter.states.get(r.BACK)):this.isKeyDown(s.UP)?this.fighter.setState(this.fighter.states.get(r.JUMP)):this.isKeyPressed(s.A)?this.fighter.setState(this.fighter.states.get(r.BODY_PUNCH)):this.isKeyPressed(s.C)?this.fighter.setState(this.fighter.states.get(r.BODY_KICK)):this.isKeyPressed(s.X)?this.fighter.setState(this.fighter.states.get(r.HEAD_PUNCH)):this.isKeyPressed(s.Z)&&this.fighter.setState(this.fighter.states.get(r.HEAD_KICK)),this.fighter.runDefaultAnimation(t),this.fighter.setOppositeDirection()},e}(O),P=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(t){function e(){return t.call(this)||this}return P(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"move"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.STAND)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.STAND)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.fighter.velocity.x=this.fighter.DEFAULT.VELOCITY.X[this.fighter.getStateName()]},e.prototype.update=function(t){this.fighter.runDefaultAnimation(t),this.fighter.setOppositeDirection()},e}(O),D=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F=function(t){function e(){return t.call(this)||this}return D(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"forward"},enumerable:!1,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.update=function(e){this.isForward()?this.isKeyDown(s.DOWN)?this.fighter.setState(this.fighter.states.get(r.SIT_DOWN)):this.isKeyDown(s.UP)?this.fighter.setState(this.fighter.states.get(r.JUMP_FORWARD)):this.isBack()?this.fighter.setState(this.fighter.states.get(r.BACK)):this.isKeyPressed(s.A)?this.fighter.setState(this.fighter.states.get(r.BODY_PUNCH)):this.isKeyPressed(s.C)?this.fighter.setState(this.fighter.states.get(r.BODY_KICK)):this.isKeyPressed(s.X)?this.fighter.setState(this.fighter.states.get(r.HEAD_PUNCH)):this.isKeyPressed(s.Z)&&this.fighter.setState(this.fighter.states.get(r.HEAD_KICK)):this.fighter.setState(this.fighter.states.get(r.STAND)),t.prototype.update.call(this,e)},e}(A),C=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(t){function e(){return t.call(this)||this}return C(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"back"},enumerable:!1,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.update=function(e){this.isBack()?this.isKeyDown(s.DOWN)?this.fighter.setState(this.fighter.states.get(r.SIT_DOWN)):this.isKeyDown(s.UP)?this.fighter.setState(this.fighter.states.get(r.JUMP_BACK)):this.isForward()?this.fighter.setState(this.fighter.states.get(r.FORWARD)):this.isKeyPressed(s.A)?this.fighter.setState(this.fighter.states.get(r.BODY_PUNCH)):this.isKeyPressed(s.C)?this.fighter.setState(this.fighter.states.get(r.BODY_KICK)):this.isKeyPressed(s.X)?this.fighter.setState(this.fighter.states.get(r.HEAD_PUNCH)):this.isKeyPressed(s.Z)&&this.fighter.setState(this.fighter.states.get(r.HEAD_KICK)):this.fighter.setState(this.fighter.states.get(r.STAND)),t.prototype.update.call(this,e)},e}(A),B=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=function(t){function e(){return t.call(this)||this}return B(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"jump"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.JUMP)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.JUMP)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.fighter.velocity.y=this.fighter.DEFAULT.VELOCITY.Y[r.JUMP]},e.prototype.update=function(t){this.fighter.runSinglePassAnimation(t),this.fighter.velocity.y+=1e3*t.secondsPassed,this.fighter.position.y>i&&(this.fighter.position.y=i,this.fighter.setState(this.fighter.states.get(r.STAND)))},e}(O),I=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),U=function(t){function e(){return t.call(this)||this}return I(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"jump-back"},enumerable:!1,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this.fighter.velocity.x=this.fighter.DEFAULT.VELOCITY.X[this.fighter.getStateName()]},e.prototype.update=function(e){t.prototype.update.call(this,e)},e}(E),K=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),W=function(t){function e(){return t.call(this)||this}return K(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"jump-forward"},enumerable:!1,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this),this.fighter.velocity.x=this.fighter.DEFAULT.VELOCITY.X[this.fighter.getStateName()]},e.prototype.update=function(e){t.prototype.update.call(this,e)},e}(E),N=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),H=function(t){function e(){return t.call(this)||this}return N(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"sit"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.SIT)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.SIT)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.fighter.velocity.x=0},e.prototype.update=function(t){this.fighter.setOppositeDirection(),(this.isKeyUp(s.DOWN)||this.isKeyDown(s.UP))&&this.fighter.setState(this.fighter.states.get(r.SIT_UP))},e}(O),R=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),M=function(t){function e(){return t.call(this)||this}return R(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"sit-up"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.update=function(t){var e,n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(this.fighter.frames.get(this.name),3),o=(n[0],n[1]),i=n[2];e=i instanceof Array?i[this.fighter.currentFrame]:i,t.previous>this.fighter.animationTimer+e&&(this.fighter.animationTimer=t.previous,console.log(this.fighter.currentFrame),this.fighter.currentFrame++,this.fighter.currentFrame>=o&&(this.fighter.currentFrame=o-1,this.fighter.setState(this.fighter.states.get(r.STAND))))},e}(H),L=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t){function e(){return t.call(this)||this}return L(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"sit-down"},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.update=function(t){this.fighter.runSinglePassAnimation(t,r.SIT)},e}(H),J=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(t){function e(e){var n=t.call(this)||this;return n.hitFrameIndex=e,n.hitFrameIndex=e,n}return J(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"body-hit"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.STAND)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.STAND)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.fighter.velocity.x=0},e.prototype.update=function(t){this.fighter.runSinglePassAnimation(t,r.STAND)},e}(O),G=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=function(t){function e(e){var n=t.call(this,e)||this;return n.hitFrameIndex=e,n}return G(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"body-punch"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBox",{get:function(){return this.fighter.currentFrame===this.hitFrameIndex?u.get(r.BODY_PUNCH):[0,0,0,0]},enumerable:!1,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.update=function(e){t.prototype.update.call(this,e)},e}(Y),V=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Z=function(t){function e(e){var n=t.call(this,e)||this;return n.hitFrameIndex=e,n}return V(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"body-kick"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBox",{get:function(){return this.fighter.currentFrame===this.hitFrameIndex?u.get(r.BODY_KICK):[0,0,0,0]},enumerable:!1,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.update=function(e){t.prototype.update.call(this,e)},e}(Y),z=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=function(t){function e(e){var n=t.call(this)||this;return n.hitFrameIndex=e,n.hitFrameIndex=e,n}return z(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"head-hit"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.STAND)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.STAND)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.fighter.velocity.x=0},e.prototype.update=function(t){this.fighter.runSinglePassAnimation(t,r.STAND)},e}(O),$=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q=function(t){function e(e){var n=t.call(this,e)||this;return n.hitFrameIndex=e,n}return $(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"head-punch"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBox",{get:function(){return this.fighter.currentFrame===this.hitFrameIndex?u.get(r.HEAD_PUNCH):[0,0,0,0]},enumerable:!1,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.update=function(e){t.prototype.update.call(this,e)},e}(q),tt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=function(t){function e(e){var n=t.call(this,e)||this;return n.hitFrameIndex=e,n}return tt(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"head-kick"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hitBox",{get:function(){return this.fighter.currentFrame===this.hitFrameIndex?u.get(r.HEAD_KICK):[0,0,0,0]},enumerable:!1,configurable:!0}),e.prototype.init=function(){t.prototype.init.call(this)},e.prototype.update=function(e){t.prototype.update.call(this,e)},e}(q);function nt(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(t,4);return{x:e[0],y:e[1],width:e[2],height:e[3]}}function rt(t,e){return t.x+t.width>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y+t.height>e.y}function ot(t,e,n){var r=t.x+n.x*e,o=r+n.width*e;return{x:Math.min(r,o),y:t.y+n.y,width:n.width,height:n.height}}var it=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),st=function(t){function e(){return t.call(this)||this}return it(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return r.HEAD_HURT},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.STAND)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.STAND)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.fighter.health-=15},e.prototype.update=function(t){this.fighter.health>0?this.fighter.runSinglePassAnimation(t,r.STAND):this.fighter.setState(this.fighter.states.get(r.LOSE))},e}(O),at=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ct=function(t){function e(){return t.call(this)||this}return at(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"body-hurt"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.STAND)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.STAND)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.fighter.health-=10},e.prototype.update=function(t){this.fighter.health>0?this.fighter.runSinglePassAnimation(t,r.STAND):this.fighter.setState(this.fighter.states.get(r.LOSE))},e}(O),ut=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ht=function(t){function e(){var e=t.call(this)||this;return e.isFinalState=!1,e}return ut(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return r.JUMP_HURT},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.STAND)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.STAND)},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=-1*this.fighter.velocity.x>0?1:-1;this.fighter.velocity.x=this.fighter.DEFAULT.VELOCITY.X[r.JUMP_HURT]*t,this.fighter.velocity.y=this.fighter.DEFAULT.VELOCITY.Y[r.JUMP_HURT],this.fighter.health-=20},e.prototype.update=function(t){this.isFinalState||(this.fighter.runSinglePassAnimation(t),this.fighter.velocity.y+=1e3*t.secondsPassed,this.fighter.position.y>i&&(this.fighter.position.y=i,this.fighter.health>0?this.fighter.setState(this.fighter.states.get(r.STAND_UP)):(this.isFinalState=!0,this.fighter.enemy.setState(this.fighter.enemy.states.get(r.WIN)),this.fighter.velocity.x=0,this.fighter.velocity.y=0,this.fighter.health=0)))},e}(O),pt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},ft=function(){function e(t,e,n){this.position=t,this.direction=e,this.controller=n,this.position=t,this.direction=e,this.frames=new Map,this.velocity={x:50,y:0},this.style=new Image,this.animationTimer=0,this.states=new Map,this.state=new j,this.name="",this.health=100,this.pushBox=nt(this.state.pushBox),this.hurtBox=[nt(this.state.hurtBox[0]),nt(this.state.hurtBox[1]),nt(this.state.hurtBox[2])],this.hitBox=nt(this.state.hitBox)}return e.prototype.getStateName=function(){return this.state.name},e.prototype.setOppositeDirection=function(){this.position.x+this.pushBox.x>=this.enemy.position.x+this.enemy.pushBox.x+this.enemy.pushBox.width?this.direction=n.LEFT:this.position.x+this.pushBox.x+this.pushBox.width<=this.enemy.position.x+this.enemy.pushBox.x&&(this.direction=n.RIGHT)},e.prototype.isFacedEnemy=function(){return rt({x:this.position.x+this.pushBox.x,y:this.position.y+this.pushBox.y,width:this.pushBox.width,height:this.pushBox.height},{x:this.enemy.position.x+this.enemy.pushBox.x,y:this.enemy.position.y+this.enemy.pushBox.y,width:this.enemy.pushBox.width,height:this.enemy.pushBox.height})},e.prototype.setState=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.state=t,this.state.setFighter(this,e),this.currentFrame=0},e.prototype.stageBordersUpdate=function(e,n){this.position.x>=n.position.x+t.WIDTH-this.pushBox.width?this.position.x=n.position.x+t.WIDTH-this.pushBox.width:this.position.x<this.pushBox.width&&(this.position.x=n.position.x+this.pushBox.width),this.isFacedEnemy()&&(this.position.x<=this.enemy.position.x&&(this.position.x=Math.max(this.enemy.position.x+this.enemy.pushBox.x-(this.pushBox.x+this.pushBox.width),this.pushBox.width),[r.STAND,r.JUMP,r.SIT,r.JUMP_FORWARD,r.JUMP_BACK].includes(this.enemy.getStateName())&&(this.enemy.position.x+=30*e.secondsPassed)),this.position.x>=this.enemy.position.x&&(this.position.x=Math.min(this.enemy.position.x+this.enemy.pushBox.x+this.enemy.pushBox.width+(this.pushBox.x+this.pushBox.width),t.WIDTH-this.pushBox.width),[r.STAND,r.JUMP,r.SIT,r.JUMP_FORWARD,r.JUMP_BACK].includes(this.enemy.getStateName())&&(this.enemy.position.x-=30*e.secondsPassed)))},e.prototype.attackBoxCollisionUpdate=function(t){var e,n;if((this.state instanceof q||this.state instanceof Y)&&!(this.enemy.state instanceof st||this.enemy.state instanceof ct||this.enemy.state instanceof ht)){var o=ot(this.position,this.direction,this.hitBox);try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.enemy.hurtBox.entries()),s=i.next();!s.done;s=i.next()){var a=pt(s.value,2),c=a[0],u=a[1],h=ot(this.enemy.position,this.enemy.direction,u),p=["head","body","legs"];if(rt(o,h)){console.log("".concat(this.name," hits ").concat(this.enemy.name," to ").concat(p[c])),this.enemy.position.x-=20*this.enemy.direction;var f=null;if(this.enemy.state instanceof E)console.log("JUMP HURT"),f=this.enemy.states.get(r.JUMP_HURT);else switch(p[c]){case"head":f=this.enemy.states.get(r.HEAD_HURT);break;case"body":f=this.enemy.states.get(r.BODY_HURT)}return void(f&&(console.log("set hurt state "+f.name),this.enemy.setState(f)))}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},e.prototype.getWinnerAndLoser=function(){return[this,this.enemy].sort((function(t,e){return t.health>e.health?-1:1}))},e.prototype.setWinnerAndLoserStates=function(){var t=pt(this.getWinnerAndLoser(),2),e=t[0],n=t[1];e.setState(e.states.get(r.WIN)),n.setState(n.states.get(r.LOSE))},e.prototype.runDefaultAnimation=function(t){var e,n=pt(this.frames.get(this.state.name),3),r=n[1],o=n[2];e=o instanceof Array?o[this.currentFrame]:o,t.previous>this.animationTimer+e&&(this.animationTimer=t.previous,this.currentFrame++,this.currentFrame>=r&&(this.currentFrame=0))},e.prototype.runSinglePassAnimation=function(t,e){var n,r=pt(this.frames.get(this.state.name),3),o=r[1],i=r[2];n=i instanceof Array?i[this.currentFrame]:i,t.previous>this.animationTimer+n&&(this.animationTimer=t.previous,this.currentFrame++,this.currentFrame>=o&&(this.currentFrame=o-1,e&&this.setState(this.states.get(e))))},e.prototype.update=function(t,e){this.position.x+=this.velocity.x*this.direction*t.secondsPassed,this.position.y+=this.velocity.y*t.secondsPassed,this.pushBox=nt(this.state.pushBox);var n=pt(this.state.hurtBox,3),r=n[0],o=n[1],i=n[2];this.hurtBox=[nt(r),nt(o),nt(i)],this.hitBox=nt(this.state.hitBox),this.state.update(t),this.stageBordersUpdate(t,e),this.attackBoxCollisionUpdate(t)},e}();const lt=e.p+"79ae0a0b0627a222574b.png";var yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(t){function e(){return t.call(this)||this}return yt(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return r.WIN},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.STAND)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.STAND)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.fighter.velocity.x=0,this.fighter.velocity.y=0},e.prototype.update=function(t){this.fighter.runSinglePassAnimation(t)},e}(O),dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mt=function(t){function e(){return t.call(this)||this}return dt(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return r.LOSE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.STAND)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.STAND)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.fighter.velocity.x=0,this.fighter.velocity.y=0,this.fighter.health=0,this.fighter.enemy.setState(this.fighter.enemy.states.get(r.WIN))},e.prototype.update=function(t){this.fighter.runSinglePassAnimation(t)},e}(O),vt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bt=function(t){function e(){return t.call(this)||this}return vt(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return r.STAND_UP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pushBox",{get:function(){return a.get(r.STAND)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hurtBox",{get:function(){return c.get(r.STAND)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.fighter.velocity.x=0,this.fighter.velocity.y=0},e.prototype.update=function(t){this.fighter.runSinglePassAnimation(t,r.STAND)},e}(O),xt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wt=function(t){function e(o,i,s){var a,c;void 0===i&&(i=n.RIGHT);var u=t.call(this,o,i,s)||this;return u.position=o,u.direction=i,u.controller=s,u.DEFAULT={DIRECTION:n.RIGHT,VELOCITY:{X:(a={},a[r.FORWARD]=80,a[r.BACK]=-60,a[r.JUMP_FORWARD]=100,a[r.JUMP_BACK]=-80,a[r.JUMP_HURT]=60,a),Y:(c={},c[r.JUMP]=-480,c[r.JUMP_HURT]=-250,c)}},u.DEFAULT.DIRECTION=i,u.name="Jax",u.velocity={x:u.DEFAULT.VELOCITY.X[r.FORWARD],y:0},u.frames=e.getFrames(),u.currentFrame=0,u.style.src=lt,u.states=e.getStates(),u.setState(u.states.get(r.STAND)),u}return xt(e,t),e.addStateWithFrame=function(t,n){e.availableStates.set(t.name,t),e.availableFrames.set(t.name,n)},e.getStates=function(){return this.availableStates},e.getFrames=function(){return this.availableFrames},e.availableStates=new Map,e.availableFrames=new Map,e}(ft);wt.addStateWithFrame(new T,[[70,10,54,110],7,o]),wt.addStateWithFrame(new F,[[56,120,52,110],7,o]),wt.addStateWithFrame(new j,[[368,120,52,110],7,o,-1]),wt.addStateWithFrame(new E,[[770,120,54,110],2,[200,o]]),wt.addStateWithFrame(new W,[[905,130,44,108],8,[200,80,80,80,80,80,80,0]]),wt.addStateWithFrame(new U,[[1213,130,44,108],8,[200,80,80,80,80,80,80,0],-1]),wt.addStateWithFrame(new H,[[719,10,52,110],1,0]),wt.addStateWithFrame(new k,[[667,10,52,110],2,[100,0]]),wt.addStateWithFrame(new M,[[719,10,52,110],2,[0,100],-1]),wt.addStateWithFrame(new X(2),[[0,509,66,108],5,[60,60,120,60,60]]),wt.addStateWithFrame(new Z(4),[[0,638,87,108],8,[60,60,60,60,120,60,60,60]]),wt.addStateWithFrame(new Q(2),[[0,384,66,108],5,[60,60,120,60,60]]),wt.addStateWithFrame(new et(4),[[719,638,87,108],8,[60,60,60,60,120,60,60,60]]),wt.addStateWithFrame(new gt,[[0,235,76,124],6,o]),wt.addStateWithFrame(new mt,[[467,1233,100,108],6,o]),wt.addStateWithFrame(new st,[[884,893,55,108],3,[80,120,80]]),wt.addStateWithFrame(new ct,[[1091,893,45,108],3,[80,120,80]]),wt.addStateWithFrame(new ht,[[0,1006,108,108],7,80]),wt.addStateWithFrame(new bt,[[846,1006,86,108],5,80]);const _t=e.p+"d15bd73618270297fbd5.png";var Ot=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),St=function(t){function e(o,i,s){var a,c;void 0===i&&(i=n.RIGHT);var u=t.call(this,o,i,s)||this;return u.position=o,u.direction=i,u.controller=s,u.DEFAULT={DIRECTION:n.RIGHT,VELOCITY:{X:(a={},a[r.FORWARD]=80,a[r.BACK]=-60,a[r.JUMP_FORWARD]=100,a[r.JUMP_BACK]=-80,a[r.JUMP_HURT]=60,a),Y:(c={},c[r.JUMP]=-480,c[r.JUMP_HURT]=-250,c)}},u.DEFAULT.DIRECTION=i,u.name="Scorpion",u.velocity={x:u.DEFAULT.VELOCITY.X[r.FORWARD],y:0},u.frames=e.getFrames(),u.currentFrame=0,u.style.src=_t,u.states=e.getStates(),u.setState(u.states.get(r.STAND)),u}return Ot(e,t),e.addStateWithFrame=function(t,n){e.availableStates.set(t.name,t),e.availableFrames.set(t.name,n)},e.getStates=function(){return this.availableStates},e.getFrames=function(){return this.availableFrames},e.availableStates=new Map,e.availableFrames=new Map,e}(ft);St.addStateWithFrame(new T,[[88,21,58,103],7,o]),St.addStateWithFrame(new F,[[69,150,59,100],8,o]),St.addStateWithFrame(new j,[[482,150,59,100],8,o,-1]),St.addStateWithFrame(new E,[[578,143,55,110],3,[o,200,o]]),St.addStateWithFrame(new W,[[779,149,43,101],8,[200,80,80,80,80,80,80,0]]),St.addStateWithFrame(new U,[[1080,149,43,101],8,[200,80,80,80,80,80,80,0],-1]),St.addStateWithFrame(new H,[[1043,21,58,100],1,0]),St.addStateWithFrame(new k,[[985,21,58,100],2,[100,0]]),St.addStateWithFrame(new M,[[1043,21,58,100],2,[0,100],-1]),St.addStateWithFrame(new X(1),[[15,377,73,103],3,[60,120,60]]),St.addStateWithFrame(new Z(4),[[745,377,83,103],10,[60,60,60,60,120,60,60,60,60,60]]),St.addStateWithFrame(new Q(2),[[15,263,73,103],5,[60,60,120,60,60]]),St.addStateWithFrame(new et(4),[[15,492,83,103],10,[60,60,60,60,120,60,60,60,60,60]]),St.addStateWithFrame(new gt,[[1209,132,62,118],4,o]),St.addStateWithFrame(new mt,[[21,971,117,103],6,o]),St.addStateWithFrame(new st,[[898,492,56,103],5,o]),St.addStateWithFrame(new ct,[[1209,862,66,103],7,o]),St.addStateWithFrame(new ht,[[6,971,117,103],6,80]),St.addStateWithFrame(new bt,[[1209,609,72,103],5,80]);var Tt=function(){function t(){this.heldKeys=new Set,this.pressedKeys=new Set}return t.prototype.keyDown=function(t){t.preventDefault(),this.heldKeys.add(t.code),console.log(t.code)},t.prototype.keyUp=function(t){t.preventDefault(),this.heldKeys.delete(t.code),this.pressedKeys.delete(t.code),console.log(t.code)},t.prototype.isKeyDown=function(t){return this.heldKeys.has(t)},t.prototype.isKeyUp=function(t){return!this.heldKeys.has(t)},t.prototype.isKeyPressed=function(t){return!(!this.heldKeys.has(t)||this.pressedKeys.has(t)||(this.pressedKeys.add(t),0))},t.prototype.initKeyboardEvents=function(){var t=this;window.addEventListener("keydown",(function(e){return t.keyDown(e)})),window.addEventListener("keyup",(function(e){return t.keyUp(e)}))},t.prototype.removeKeyboardEvents=function(){var t=this;window.removeEventListener("keydown",(function(e){return t.keyDown(e)})),window.removeEventListener("keyup",(function(e){return t.keyUp(e)}))},t}(),Pt=function(){function t(t){this.fighters=t,this.time=99,this.timer=0,this.style=[t,this.time]}return t.prototype.update=function(t){this.fightersAlive()&&(0!==this.time?t.previous>this.timer+664&&(this.time>0&&(this.time-=1),this.timer=t.previous,this.style=[this.fighters,this.time]):this.fighters[0].setWinnerAndLoserStates())},t.prototype.fightersAlive=function(){return this.fighters.every((function(t){return t.health>0}))},t}(),At=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dt=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},Ft=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},Ct=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jt=function(e){function o(n,r){var o=e.call(this,n,r)||this;return o.controller=new Tt,o.stage=new v,o.fighters=o.getFighters(),o.widgets=[new Pt(o.fighters)],o.camera=new _({x:255.5-t.WIDTH/2,y:0},o.fighters),o}return At(o,e),o.prototype.show=function(){this.controller.initKeyboardEvents()},o.prototype.update=function(t){var e,n;try{for(var o=Ct(Ft(Ft([this.camera,this.stage],Dt(this.fighters),!1),Dt(this.widgets),!1)),i=o.next();!i.done;i=o.next()){var s=i.value;"update"in s&&"function"==typeof s.update&&s.update(t,this.camera)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}this.controller.isKeyPressed("Space")&&this.fighters.some((function(t){return t.getStateName()===r.LOSE}))&&this.game.startBattle()},o.prototype.hide=function(){this.controller.removeKeyboardEvents()},o.prototype.render=function(){var t,e;try{for(var n=Ct(Ft(Ft([this.camera,this.stage],Dt(this.fighters),!1),Dt(this.widgets),!1)),r=n.next();!r.done;r=n.next()){var o=r.value;this.drawer.render(o,this.camera)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},o.prototype.getFighters=function(){var t=[new wt({x:167.5,y:i},n.RIGHT,this.controller),new St({x:343.5,y:i},n.LEFT,this.controller)];return t[0].enemy=t[1],t[1].enemy=t[0],t},o}((function(t,e){this.drawer=t,this.game=e,this.drawer=t,this.game=e}));(new(function(){function t(){this.drawingArea=this.getDrawingArea(),this.frameTime={previous:0,secondsPassed:0}}return t.prototype.startBattle=function(){this.showScreen(new jt(this.drawingArea,this))},t.prototype.showScreen=function(t){this.currentScreen&&this.currentScreen.hide(),this.currentScreen=t,this.currentScreen.show()},t.prototype.getDrawingArea=function(){var t=document.querySelector("canvas"),e=t.getContext("2d");return e.imageSmoothingEnabled=!1,new w(t,e)},t.prototype.update=function(){this.currentScreen.update(this.frameTime)},t.prototype.render=function(){this.currentScreen.render()},t.prototype.frame=function(t){var e=this;window.requestAnimationFrame((function(t){return e.frame(t)})),this.frameTime.secondsPassed=(t-this.frameTime.previous)/1e3,this.frameTime.previous=t,this.update(),this.render()},t.prototype.start=function(){var t=this;this.startBattle(),window.requestAnimationFrame((function(e){return t.frame(e)}))},t}())).start()})();